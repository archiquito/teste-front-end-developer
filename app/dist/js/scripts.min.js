!function(a){var b={$height:a(window).height()-230+"px",construct:function(){this.minHeightWrap(),this.search()},minHeightWrap:function(){a("#wrap").css("min-height",this.$height),a(window).resize(function(){heig=a(window).height()-230+"px",a("#wrap").css("min-height",heig)})},search:function(){a(".sch label").click(function(){0===a(".sch #s").width()&&a("body").addClass("open-search")}),a(".sch #s").focusout(function(){var b=a(this).val();a("body").hasClass("open-search")&&""===b&&a("body").removeClass("open-search")})}},c=b;c.construct(),console.log(c)}(jQuery),function(a){var b={menuActive:function(b){var c=a(".menu ul");c.find("li").removeClass("active"),c.find('a[href="#/'+b+'"]').parent().addClass("active")},helperTabs:function(){a(".nav-tabs a").click(function(b){b.preventDefault(),a(".nav-tabs a").parent().removeClass("active"),a(this).parent().addClass("active"),a(".tab-content .tab-pane").removeClass("active"),a(".tab-content .tab-pane[id="+a(this).attr("aria-controls")+"]").addClass("active")})},helperMaskInput:function(){a(".mask-tel").mask("(99) 9999-9999?9"),a(".mask-cep").mask("99999-999"),a(".mask-cpf").mask("999.999.999-99"),a(".mask-uf").mask("**"),a(".mask-num").mask("9?999999999")},helperSearchCep:function(){a(".sh-cep").on("click",function(){var b=a(this).closest(".serch-cep").find(".mask-cep").val(),c=a(this).closest("fieldset");a.getJSON("http://viacep.com.br/ws/"+b.replace(/[\(\)\.\s-]+/g,"")+"/json/ ",function(a){console.log(a),c.find(".rs").val(a.logradouro),c.find(".bs").val(a.bairro),c.find(".cs").val(a.localidade),c.find(".us").val(a.uf),c.find(".auto").removeAttr("disabled")})})},helperCloneFields:function(){a("#insum").on("click",".btn-clone",function(){a("div.form-group.clone").last().clone().appendTo(a("#insum")).find("input").attr("name",function(a,b){return b.replace(/\[(\d+)\]/,function(a,b){return"["+(+b+1)+"]"})})}),a("#insum").on("click",".btn-remove",function(){a(this).closest("div.form-group.clone").remove()})},admin:function(){var b="SELECT * FROM solicitantes ORDER BY nome DESC";mysqlQuery(b,function(b){var c=JSON.parse(b),d="";a.each(c,function(a,b){d+="<tr>",d+="<td>"+b.id+"</td>",d+="<td>"+b.nome+"</td>",d+="<td>"+b.telefone+"</td>",d+="<td>"+b.cidade+"</td>",d+="</tr>"}),a("#solicitantes").html(d)})},getPedido:function(b){var c="SELECT pedido.id AS id, pedido.id_solicitante AS idSoli, pedido.data_de_compra AS data, pedido.cep AS cepPed, pedido.rua AS ruaPed, pedido.numero AS numeroPed, pedido.bairro AS bairroPed, pedido.cidade AS cidadePed, pedido.estado AS estadoPed, pedido.pais AS paisPed, material.nome AS nomeMat, material.marca AS marcaMat, material.preco AS precoMat, material.quantidade AS qtdMat, solicitante.nome AS nomeSol, solicitante.cpf AS cpfSol, solicitante.cep AS cepSol, solicitante.rua AS ruaSol, solicitante.numero AS numeroSol, solicitante.bairro AS bairroSol, solicitante.cidade AS cidadeSol, solicitante.estado AS estadoSol, solicitante.pais AS paisSol, solicitante.telefone AS telSol FROM pedidos AS pedido INNER JOIN materiais AS material ON material.id_pedido = pedido.id INNER JOIN solicitantes AS solicitante ON solicitante.id = pedido.id_solicitante WHERE pedido.id = "+b;mysqlQuery(c,function(b){var c=JSON.parse(b),d="";0!==c.length?(a.each(c,function(a,b){d+='<ul class="nav nav-tabs" role="tablist">',d+='<li role="presentation" class="active"><a href="#mater" aria-controls="mater" role="tab" data-toggle="tab">Dados do Pedido</a></li>',d+='<li role="presentation"><a href="#solic" aria-controls="solic" role="tab" data-toggle="tab">Dados do Solicitante</a></li>',d+='<li role="presentation"><a href="#entr" aria-controls="entr" role="tab" data-toggle="tab">Dados da Entrega</a></li>',d+="</ul>",d+='<div class="tab-content">',d+='<fieldset role="tabpanel" id="mater" class="mat tab-pane active"">',d+='<div class="form-group">',d+='<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3"><label>Material</label><input type="text" class="form-control" value="'+b.nomeMat+'"></div>',d+='<div class="col-xs-12 col-sm-6 col-md-3 col-lg-2"><label>Marca</label><input type="text" class="form-control" value="'+b.marcaMat+'"></div>',d+='<div class="col-xs-12 col-sm-6 col-md-3 col-lg-2"><label>Data da Compra</label><input type="text" class="form-control mask-date" value="'+b.data+'"></div>',d+='<div class="col-xs-12 col-sm-6 col-md-3 col-lg-2"><label>Quantidade</label><input type="text" class="form-control" value="'+b.qtdMat+'"></div>',d+='<div class="col-xs-12 col-sm-6 col-md-3 col-lg-2"><label>Preço</label><input type="text" class="form-control .mask-money" value="R$ '+b.precoMat+',00"></div>',d+="</div>",d+="</fieldset>",d+='<fieldset role="tabpanel" id="solic" class="mat tab-pane">',d+='<div class="form-group">',d+='<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3"><label>Nome</label><input type="text" class="form-control" value="'+b.nomeSol+'"></div>',d+='<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3"><label>CPF</label><input type="text" class="form-control mask-cpf" value="'+b.cpfSol+'"></div>',d+='<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3"><label>Telefone</label><input type="text" class="form-control mask-tel" value="'+b.telSol+'"></div>',d+='<div class="col-xs-12 col-sm-6 col-md-3 col-lg-2"><label>CEP</label><input type="text" class="form-control mask-cep" value="'+b.cepSol+'"></div>',d+='<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3"><label>Rua</label><input type="text" class="form-control" value="'+b.ruaSol+'"></div>',d+='<div class="col-xs-12 col-sm-6 col-md-2 col-lg-1"><label>Número</label><input type="text" class="form-control" value="'+b.numeroSol+'"></div>',d+='<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3"><label>Bairro</label><input type="text" class="form-control" value="'+b.bairroSol+'"></div>',d+='<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3"><label>Cidade</label><input type="text" class="form-control" value="'+b.cidadeSol+'"></div>',d+='<div class="col-xs-12 col-sm-6 col-md-2 col-lg-1"><label>Estado</label><input type="text" class="form-control mask-uf" value="'+b.estadoSol+'"></div>',d+='<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3"><label>País</label><input type="text" class="form-control" value="'+b.paisSol+'"></div>',d+="</div>",d+="</fieldset>",d+='<fieldset  role="tabpanel" id="entr"  class="mat tab-pane">',d+='<div class="form-group">',d+='<div class="col-xs-12 col-sm-6 col-md-3 col-lg-2"><label>CEP</label><input type="text" class="form-control mask-cep" value="'+b.cepPed+'"></div>',d+='<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3"><label>Rua</label><input type="text" class="form-control" value="'+b.ruaPed+'"></div>',d+='<div class="col-xs-12 col-sm-6 col-md-2 col-lg-1"><label>Número</label><input type="text" class="form-control" value="'+b.numeroPed+'"></div>',d+='<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3"><label>Bairro</label><input type="text" class="form-control" value="'+b.bairroPed+'"></div>',d+='<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3"><label>Cidade</label><input type="text" class="form-control" value="'+b.cidadePed+'"></div>',d+='<div class="col-xs-12 col-sm-6 col-md-2 col-lg-1"><label>Estado</label><input type="text" class="form-control mask-uf" value="'+b.estadoPed+'"></div>',d+='<div class="col-xs-12 col-sm-6 col-md-4 col-lg-3"><label>País</label><input type="text" class="form-control" value="'+b.paisPed+'"></div>',d+="</div>",d+="</fieldset>",d+="</div>"}),a(".results").html(d)):(d+='<h3 class="text-center">Não exite pedido para o código informado.</h3>',d+='<form method="post" action="#/pedido" class="seach-order"><fieldset>',d+='<div class="form-group">',d+='<div class="col-xs-6 col-md-8">',d+='<input type="text" name="id" id="id" class="form-control mask-num" placeholder="Número do Pedido">',d+="</div>",d+='<div class="col-xs-6 col-md-4">',d+='<button type="submit" id="ped" class="btn btn-green c">Buscar</button>',d+="</div>",d+="</div></fieldset></form>",a("#content").html(d))})},pedidos:function(){var b="SELECT * FROM pedidos ORDER BY id DESC";mysqlQuery(b,function(b){var c=JSON.parse(b),d="";a.each(c,function(a,b){d+="<tr>",d+="<td>"+b.id+"</td>",d+="<td>"+b.id_solicitante+"</td>",d+="<td>"+b.data_de_compra+"</td>",d+="</tr>"}),a("#pedidos").html(d)})}},c=a.sammy("#wrap",function(){this.helpers({animated:function(a,b){this.swap=function(c){this.$element().html(c).find(a).addClass(b)}}}),this.get("#/",function(){b.menuActive(""),this.partial("views/index.html",function(){a(".mask-num").mask("9?999999999")})}),this.get("#/solucoes",function(){b.menuActive("solucoes"),this.partial("views/solucoes.html",function(){b.pedidos()})}),this.get("#/admin",function(){b.menuActive("admin"),this.partial("views/admin.html",function(){b.admin()})}),this.post("#/pedido",function(){var a=this.params.id;this.redirect("#/pedido/id",a)}),this.get("#/pedido/id/:id",function(){b.menuActive(""),c.clearTemplateCache();var d=this.params.id;this.partial("views/pedido.html",function(){b.getPedido(d),a(".cod").html(d),b.helperMaskInput(),b.helperTabs()})}),this.get("#/novo/pedido",function(){b.menuActive(""),this.partial("views/novo-pedido.html",function(){b.helperTabs(),b.helperMaskInput(),b.helperSearchCep(),b.helperCloneFields()})}),this.get("",function(){b.menuActive("404"),this.partial("views/404.html")})});a(function(){c.run("#/")})}(jQuery);